/**
 * @author Taha Al-Jody <taha@ta3design.com>
 * https://github.com/TA3/web-user-behaviour
 */
var userBehaviour=function(){function e(){a={userInfo:{appCodeName:navigator.appCodeName||"",appName:navigator.appName||"",vendor:navigator.vendor||"",platform:navigator.platform||"",userAgent:navigator.userAgent||""},time:{startTime:0,currentTime:0},clicks:{clickCount:0,clickDetails:[]},mouseMovements:[],mouseScroll:[],contextChange:[]}}function o(){return Date.now()}function n(e){u={},Object.keys(l).forEach(o=>{u[o]=o in e?e[o]:l[o]})}function s(){Object.keys(u).length!==Object.keys(l).length&&(console.log("no config provided. using default.."),u=l),void 0!==u.timeCount&&u.timeCount&&(a.time.startTime=o()),u.mouseMovement&&(m.eventListeners.mouseMovement=window.addEventListener("mousemove",m.eventsFunctions.mouseMovement),m.mouseInterval=setInterval(()=>{m.mousePosition&&m.mousePosition.length&&(!a.mouseMovements.length||m.mousePosition[0]!==a.mouseMovements[a.mouseMovements.length-1][0]&&m.mousePosition[1]!==a.mouseMovements[a.mouseMovements.length-1][1])&&a.mouseMovements.push(m.mousePosition)},1e3*l.mouseMovementInterval)),u.clicks&&(m.eventListeners.click=window.addEventListener("click",m.eventsFunctions.click)),u.mouseScroll&&(m.eventListeners.scroll=window.addEventListener("scroll",m.eventsFunctions.scroll)),!1!==u.processTime&&(m.processInterval=setInterval(()=>{u.processData(r())},1e3*u.processTime))}function t(){u.processData(r()),u.clearAfterProcess&&e()}function i(){!1!==u.processTime&&clearInterval(m.processInterval),clearInterval(m.mouseInterval),window.removeEventListener("scroll",m.eventsFunctions.scroll),window.removeEventListener("click",m.eventsFunctions.click),window.removeEventListener("mousemove",m.eventsFunctions.mouseMovement)}function r(){return!1===u.userInfo&&void 0!==userBehaviour.showResult().userInfo&&delete userBehaviour.showResult().userInfo,void 0!==u.timeCount&&u.timeCount&&(a.time.currentTime=o()),a}function c(){return Object.keys(u).length!==Object.keys(l).length?l:u}var l={userInfo:!0,clicks:!0,mouseMovement:!0,mouseMovementInterval:1,mouseScroll:!0,mousePageChange:!0,timeCount:!0,clearAfterProcess:!0,processTime:15,processData:function(e){console.log(e)}},u={},m={processInterval:null,mouseInterval:null,mousePosition:[],eventListeners:{scroll:null,click:null,mouseMovement:null},eventsFunctions:{scroll:()=>{a.mouseScroll.push([window.scrollX,window.scrollY,o()])},click:e=>{a.clicks.clickCount++;var n=[],s="";e.path.forEach((o,t)=>{t!==e.path.length-1&&t!==e.path.length-2&&(s=o.localName,""!==o.className&&o.classList.forEach(e=>{s+="."+e}),""!==o.id&&(s+="#"+o.id),n.push(s))}),n=n.reverse().join(">"),a.clicks.clickDetails.push([e.clientX,e.clientY,n,o()])},mouseMovement:e=>{m.mousePosition=[e.clientX,e.clientY,o()]}}},a={};return e(),{showConfig:c,config:n,start:s,stop:i,showResult:r,processResults:t}}();